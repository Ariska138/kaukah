(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1040:function(t,e,r){"use strict";r(952)},1041:function(t,e,r){"use strict";r(953)},1042:function(t,e,r){"use strict";r(954)},1043:function(t,e,r){"use strict";r(955)},1110:function(t,e,r){"use strict";r.r(e);r(12),r(8),r(14),r(6),r(15);var n=r(2),o=(r(34),r(43),r(17),r(21),r(33),r(7),r(51)),c=r(73),l=r(882),d=(r(31),{components:{BuyNowButton:l.a},props:{isBundleReady:Boolean,canAddBundleToCart:Boolean,bundleProductLeft:Number},computed:{isMobile:function(){return this.$vuetify.breakpoint.smAndDown}}}),h=(r(1040),r(18)),m=r(26),f=r.n(m),v=r(558),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:{"bundle-add-to-cart-button":!t.isMobile}},[t.bundleProductLeft>0?r("v-btn",{staticClass:"px-1",attrs:{disabled:"",depressed:"",block:""}},[t._v("\n        "+t._s(t.$t("BUNDLE_PICK_MORE",t.bundleProductLeft))+"\n    ")]):r("BuyNowButton",{class:{noshadow:!t.canAddBundleToCart},attrs:{ready:t.canAddBundleToCart},on:{click:function(e){return t.$emit("click")}}})],1)}),[],!1,null,"400a456e",null),w=component.exports;f()(component,{VBtn:v.a});var y={props:{cartItemTotalQuantity:Number},methods:{clickedSmallCart:function(){this.$gtm.step("cart_click"),this.$nuxt.$emit("showCart")}}},x=r(571),O=Object(h.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{staticClass:"secondary btn--cart cart-indicator--small",attrs:{color:"white",icon:""},on:{click:t.clickedSmallCart}},[r("v-badge",{scopedSlots:t._u([{key:"badge",fn:function(){return[r("span",[t._v(t._s(t.cartItemTotalQuantity))])]},proxy:!0}])},[t._v(" "),r("t-icon",{staticClass:"v-icon",attrs:{name:"shopping-cart"}})],1)],1)}),[],!1,null,null,null),_=O.exports;f()(O,{VBadge:x.a,VBtn:v.a});function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var $={props:{cartItemTotalQuantity:Number},computed:k(k({},Object(o.b)({cartItems:"cart-v2/cartItems",priceInfo:"cart-v2/priceInfo"})),{},{image:function(){return this.product.images[0].url},product:function(){var t=this.cartItems[0];return t?t.productBundleId?t.bundledItems[0].product:t.product:{}},name:function(){return this.product.name||""},totalPrice:function(){return this.priceInfo.totalPrice}}),methods:{openCart:function(){this.$gtm.step("cart_click"),this.$nuxt.$emit("showCart")}}},E=(r(1041),r(230)),j=r(567),P=r(568),R=Object(h.a)($,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"btn--cart cart-indicator secondary px-4 py-2",on:{click:t.openCart}},[t.$vuetify.breakpoint.xsOnly?r("div",{staticClass:"touch-indicator touch-indicator--dark"}):t._e(),t._v(" "),r("v-layout",{attrs:{"align-center":""}},[r("t-img",{staticClass:"shrink item round mr-2",attrs:{img:t.image,"img-width":128,width:"48px","aspect-ratio":"1"}}),t._v(" "),r("v-flex",[r("div",{staticClass:"white--text font-weight-bold"},[t._v("\n                "+t._s(t.$t("ITEM_IN_CART",t.cartItemTotalQuantity))+"\n            ")]),t._v(" "),r("div",{staticClass:"caption white--text",staticStyle:{opacity:"0.92"}},[t._v("\n                "+t._s(t.$c(t.totalPrice))+"\n            ")])]),t._v(" "),r("v-btn",{staticClass:"v-btn--light-dark ml-2",attrs:{icon:""},on:{click:t.openCart}},[r("v-badge",{scopedSlots:t._u([{key:"badge",fn:function(){return[r("span",[t._v(t._s(t.cartItemTotalQuantity))])]},proxy:!0}])},[t._v(" "),r("t-icon",{staticClass:"v-icon",attrs:{name:"shopping-cart"}})],1)],1)],1)],1)}),[],!1,null,"1216855a",null),I=R.exports;f()(R,{VBadge:x.a,VBtn:v.a,VCard:E.a,VFlex:j.a,VLayout:P.a});var T=r(0),L=(r(16),r(866)),S=r(10);function B(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var M={components:{Messages:L.a},data:function(){return{show:!1}},computed:D(D({},Object(o.b)({vendor:"vendor/vendor",numUnread:"messages/numUnreadMessages"})),{},{shopSettings:function(){return this.vendor.settings}}),watch:{$route:{handler:function(t){var e=t?(t.name||"").replace("domain-",""):"";[S.p,S.t,S.u,S.f,S.e,S.b,S.c,S.n,S.m].includes(e)||(this.show=!1)},immediate:!0}},mounted:function(){this.$nuxt.$on("toggleChatModal",this.toggle),this.$nextTick()},methods:{toggle:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.show=!t.show,!t.show){e.next=5;break}return e.next=4,t.$nextTick();case 4:t.$refs.messages.scrollToBottom();case 5:case"end":return e.stop()}}),e)})))()},isWhatsappEnabled:function(){return!("free"==this.vendor.premiumPackage||!this.shopSettings)&&this.shopSettings.whatsappEnabled}}},V=(r(1042),r(90)),A=r(195),N=Object(h.a)(M,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-btn",{class:t.isWhatsappEnabled()?"whatsapp-color":"secondary",staticStyle:{"background-color":"#25d366"},attrs:{icon:"",color:"white"},on:{click:t.toggle}},[t.isWhatsappEnabled()?r("v-badge",{attrs:{value:!1}},[r("t-icon",{staticClass:"v-icon",attrs:{name:"whatsapp"}})],1):r("v-badge",{attrs:{value:t.numUnread>0},scopedSlots:t._u([{key:"badge",fn:function(){return[r("span",[t._v(t._s(t.numUnread))])]},proxy:!0}])},[t._v(" "),r("t-icon",{staticClass:"v-icon",attrs:{name:t.show?"times":"comment-alt"}})],1)],1),t._v(" "),r("v-slide-x-reverse-transition",[t.show?r("v-card",{staticClass:"chat-modal",attrs:{elevation:"20"}},[r("v-card-title",{staticClass:"flex--wrap"},[r("h3",[t._v("\n                    "+t._s(t.isWhatsappEnabled()?t.$t("WHATSAPP_CHAT"):t.$t("CHAT"))+"\n                ")])]),t._v(" "),r("v-card-text",{staticClass:"flex--wrap"},[r("Messages",{ref:"messages",attrs:{"in-modal":!0}})],1)],1):t._e()],1)],1)}),[],!1,null,"3cf1dbf6",null),H=N.exports;function W(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?W(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):W(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}f()(N,{VBadge:x.a,VBtn:v.a,VCard:E.a,VCardText:V.b,VCardTitle:V.c,VSlideXReverseTransition:A.f});var U={components:{BuyNowButton:l.a,CartIndicator:I,BundleAddToCartButton:w,SmallCartIndicator:_,FloatingChatButton:H},data:function(){return{isHydrated:!1}},computed:F(F({},Object(o.b)({product:"catalog/product",cartItems:"cart/cartItems",vendor:"vendor/vendor",bundle:"bundle/bundle",bundleSets:"bundle/sets",disabledBuy:"cart/disabledBuy",cartV2ItemTotalQuantity:"cart-v2/cartItemTotalQuantity"})),{},{showFloatingButtons:function(){return[S.p,S.t,S.u,S.f,S.e,S.b,S.c,S.n,S.m].includes(this.routeName)},productReleaseDate:function(){var t=this.product;return t?t.releaseDate:null},showCart:function(){return this.cartItemTotalQuantity>0},cartItemTotalQuantity:function(){return this.cartV2ItemTotalQuantity},routeName:function(){return this.$route&&this.$route.name?this.$route.name.replace("domain-",""):""},isMobile:function(){return!this.isHydrated||this.$vuetify.breakpoint.smAndDown},isProductPage:function(){return this.routeName===S.t},isProductBundlePage:function(){return this.routeName===S.b},showBuyNow:function(){return this.isProductPage&&this.isMobile&&this.product},showReminder:function(){return this.showBuyNow&&this.product.useStock&&"unavailable"==this.product.preorderPolicy&&"soldout"==Object(c.l)(this.$store,this.product)},isProductReady:function(){return!0},canAddBundleToCart:function(){return this.bundleSets.length>0&&0==this.bundleProductLeft},bundleProductLeft:function(){return this.bundleSets.filter((function(t){return!t.selection.product})).length},useBigCart:function(){return!(this.isProductBundlePage||this.isProductPage&&this.isMobile)},isProfilePage:function(){return this.routeName===S.v},isReviewPage:function(){return this.routeName===S.w},showFloatingChatButton:function(){if(this.vendor){var t=this.vendor.settings;return!!t&&(t.alwaysShowChatButton||t.whatsappEnabled)}}}),mounted:function(){this.isHydrated=!0,this.$nuxt.$on("showCart",this.openCartPage)},beforeDestroy:function(){this.$nuxt.$off("showCart",this.openCartPage)},methods:{startCheckout:function(){this.$nuxt.$emit("startCheckout")},addBundleToCart:function(){this.$nuxt.$emit("addBundleToCart")},openCartPage:function(){this.$router.push(this.$path("/cart"))}}},Q=(r(1043),Object(h.a)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"fab-container px-2 pb-2 floating-buttons"},[t.showFloatingButtons?r("v-layout",{attrs:{"align-end":"","justify-end":""}},[r("v-flex",{staticClass:"flex--fill layout justify-center"},[r("v-flex",{staticClass:"fab-container__center"},[r("v-slide-y-reverse-transition",{attrs:{mode:"out-in"}},[t.isProductBundlePage?r("BundleAddToCartButton",{key:"buy-bundle",attrs:{"can-add-bundle-to-cart":t.canAddBundleToCart,"bundle-product-left":t.bundleProductLeft},on:{click:t.addBundleToCart}}):t.showBuyNow?r("BuyNowButton",{key:"buy-now",attrs:{"show-reminder":t.showReminder,ready:t.isProductReady,"release-date":t.productReleaseDate,disabled:!t.showReminder&&t.disabledBuy,"release-count-down":t.product.releaseCountDown},on:{click:t.startCheckout}}):t.showCart&&t.useBigCart?r("CartIndicator",{key:"cart-large",attrs:{"cart-item-total-quantity":t.cartItemTotalQuantity}}):t._e()],1)],1)],1),t._v(" "),r("v-slide-x-transition",[t.showCart&&!t.useBigCart?r("SmallCartIndicator",{staticClass:"ml-2",attrs:{"cart-item-total-quantity":t.cartItemTotalQuantity}}):t._e()],1),t._v(" "),t.showFloatingChatButton?r("FloatingChatButton",{staticClass:"ml-2"}):t._e()],1):t._e()],1)}),[],!1,null,"04455a22",null));e.default=Q.exports;f()(Q,{VFlex:j.a,VLayout:P.a,VSlideXTransition:A.g,VSlideYReverseTransition:A.h})},579:function(t,e,r){"use strict";var n=r(241);e.a=n.a},581:function(t,e,r){"use strict";var n=r(0),o=(r(11),r(16),{data:function(){return{pageIndex:1,pageTotal:0,pageItems:[],pageHasMore:!0,pageLimit:25,pageLoading:!1}},methods:{restore:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=e.$store.getters["cache/cache"](t))){r.next=5;break}return o=n.pageIndex,c=n.pageTotal,l=n.pageItems,d=n.pageHasMore,h=n.pageLimit,Object.assign(e,{pageIndex:o,pageTotal:c,pageItems:l,pageHasMore:d,pageLimit:h}),r.abrupt("return",!0);case 5:return r.next=7,e.pageReload();case 7:return r.abrupt("return",!1);case 8:case"end":return r.stop()}}),r)})))()},pageCache:function(t){t&&this.$store.commit("cache/cache",{key:t,value:{pageIndex:this.pageIndex,pageTotal:this.pageTotal,pageItems:this.pageItems,pageHasMore:this.pageHasMore,pageLimit:this.pageLimit},seconds:60})},pageOnPage:function(t){var data=t.data.data||[];this.pageIndex+=1,this.pageItems=this.pageItems.concat(data),this.pageTotal=t.data.total,this.pageHasMore=this.pageLimit==data.length},pageReset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageIndex=t,this.pageHasMore=!0,this.pageTotal=0,this.pageItems=[],this.pageLimit=this.pageLimit||25},pageReload:function(){var t=this;return this.pageReset(),this.pageLoad().catch((function(e){throw t.pageItems=[],e}))},pageLoad:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=t||e.pageHasMore){r.next=2;break}return r.abrupt("return");case 2:if(e.pagePromise){r.next=4;break}throw new Error("no page");case 4:return e.pageHasMore=!1,e.pageLoading=!0,void 0!==t?e.pageItems=[]:t=e.pageIndex-1,n=(new Date).getTime(),e.pageRequestId=n,r.prev=9,r.next=12,e.pagePromise({limit:e.pageLimit,offset:e.pageLimit*t});case 12:if(o=r.sent,n!=e.pageRequestId){r.next=16;break}return e.pageOnPage(o),r.abrupt("return",o);case 16:return r.prev=16,n==e.pageRequestId&&(e.pageLoading=!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[9,,16,19]])})))()}}}),c=r(18),component=Object(c.a)(o,undefined,undefined,!1,null,null,null);e.a=component.exports},582:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l}));r(60);var n=function(t){var e=new Date(t),r="".concat(e.getMonth()+1),n="".concat(e.getDate()),o=e.getFullYear();return r.length<2&&(r="0".concat(r)),n.length<2&&(n="0".concat(n)),[o,r,n].join("")},o=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return"Invalid date";var n=new Date(e),o={month:r.month||"2-digit",day:"2-digit",year:"numeric"};return r.time&&(o.hour="2-digit",o.minute="2-digit",o.hour12=!1),n.toLocaleString(t,o)},c=function(t,e,r){return o(t.state.vendor.vendor.locale,e,r)},l=function(t,e,time){return o(t.state.vendor.vendor.locale,e,{month:"short",time:time})}},583:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));r(8),r(7),r(14),r(15);var n=r(2);r(84),r(6),r(12),r(17),r(21),r(33);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l=new function(){var t={A:!0,ABBR:!0,B:!0,BLOCKQUOTE:!0,BODY:!0,BR:!0,CENTER:!0,CODE:!0,DIV:!0,EM:!0,FONT:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HR:!0,I:!0,IMG:!0,LABEL:!0,LI:!0,OL:!0,P:!0,PRE:!0,SMALL:!0,SOURCE:!0,SPAN:!0,STRONG:!0,TABLE:!0,TBODY:!0,TR:!0,TD:!0,TH:!0,THEAD:!0,UL:!0,U:!0,VIDEO:!0},e={FORM:!0},r={class:!0,align:!0,color:!0,controls:!0,height:!0,href:!0,src:!0,style:!0,target:!0,title:!0,type:!0,width:!0},n={width:!0,height:!0,"max-width":!0,"max-height":!0,"margin-right":!0,"margin-left":!0,"margin-top":!0,"margin-bottom":!0,margin:!0,"padding-right":!0,"padding-left":!0,"padding-top":!0,"padding-bottom":!0,padding:!0,color:!0,"background-color":!0,"text-indent":!0,"font-family":!0,"font-size":!0,"text-align":!0,"text-decoration":!0,"text-decoration-line":!0,"text-decoration-thickness":!0,"text-decoration-style":!0,"text-decoration-color":!0,"font-weight":!0,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-color":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,display:!0,visibility:!0,position:!0,top:!0,left:!0,right:!0,bottom:!0,"min-width":!0,"min-height":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"box-shadow":!0,overflow:!0,"overflow-wrap":!0,"overflow-x":!0,"overflow-y":!0,outline:!0,"vertical-align":!0,opacity:!0,"border-collapse":!0,transform:!0,float:!0,"line-height":!0},o={"text-decoration":!0,"text-decoration-line":!0,"text-decoration-thickness":!0,"text-decoration-style":!0,"text-decoration-color":!0,color:!0},l=["http:","https:","data:","m-files:","file:","ftp:"],d={href:!0,action:!0};function h(t,e){for(var i=0;i<e.length;i++)if(0==t.indexOf(e[i]))return!0;return!1}this.SanitizeHtml=function(input,m){var f=m.tagWhitelist,v=m.attributeWhitelist,w=m.tagExceptions,y=m.attributeExceptions;if(""==(input=input.trim()))return"";if("<br>"==input)return"";f=f||c({},t),v=v||c({},r),w&&Object.keys(w).forEach((function(t){f[t.toUpperCase()]=w[t]||!1})),y&&Object.keys(y).forEach((function(t){v[t.toLowerCase()]=y[t]||!1}));var iframe=document.createElement("iframe");if(void 0===iframe.sandbox)return alert("Your browser does not support sandboxed iframes. Please upgrade to a modern browser."),"";iframe.sandbox="allow-same-origin",iframe.style.display="none",document.body.appendChild(iframe);var x=iframe.contentDocument||iframe.contentWindow.document;null==x.body&&x.write("<body></body>"),x.body.innerHTML=input;var O=function t(r){if(r.nodeType==Node.TEXT_NODE)var c=r.cloneNode(!0);else if(r.nodeType==Node.ELEMENT_NODE&&(f[r.tagName]||e[r.tagName])){if(("SPAN"==r.tagName||"B"==r.tagName||"I"==r.tagName||"U"==r.tagName)&&""==r.innerHTML.trim())return document.createDocumentFragment();c=e[r.tagName]?x.createElement("DIV"):x.createElement(r.tagName);for(var i=0;i<r.attributes.length;i++){var m=r.attributes[i];if(v[m.name])if("style"==m.name)for(var s=0;s<r.style.length;s++){var w=r.style[s];n[w]&&c.style.setProperty(w,r.style.getPropertyValue(w),o[w]?"important":"")}else{if(d[m.name]&&m.value.indexOf(":")>-1&&!h(m.value,l))continue;c.setAttribute(m.name,m.value)}}for(i=0;i<r.childNodes.length;i++){var y=t(r.childNodes[i]);c.appendChild(y,!1)}}else c=document.createDocumentFragment();return c}(x.body);return document.body.removeChild(iframe),O.innerHTML.replace(/<br[^>]*>(\S)/g,"<br>\n$1").replace(/div><div/g,"div>\n<div")},this.AllowedTags=t,this.AllowedAttributes=r,this.AllowedCssStyles=n,this.AllowedSchemas=l,this.CssImportant=o},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.SanitizeHtml(t,e)}},584:function(t,e,r){},608:function(t,e,r){"use strict";r(12),r(8),r(7),r(14),r(6),r(15);var n=r(2),o=(r(584),r(48));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=o.a.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:l({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:l({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},614:function(t,e,r){},620:function(t,e,r){},638:function(t,e,r){"use strict";r(34),r(43),r(21),r(52),r(728),r(20),r(729),r(730),r(731),r(732),r(733),r(734),r(735),r(736),r(737),r(738),r(739),r(740),r(741),r(742),r(743),r(744),r(745),r(746),r(747),r(748),r(749),r(750),r(751),r(752),r(17),r(35),r(39),r(353);var n=r(694),o=r.n(n);e.a={resizeImage:function(t,e){return new Promise((function(r,n){o()(t,(function(img,data){if(e&&img.width<e||img.height<e)n(new Error("ERROR_IMAGE_SIZE_SMALL"));else{var o=function(t){var e=";base64,";if(!t.includes(e)){var r=t.split(","),n=r[0].split(":")[1],o=r[1];return new Blob([o],{type:n})}for(var c=t.split(e),l=c[0].split(":")[1],d=window.atob(c[1]),h=d.length,m=new Uint8Array(h),i=0;i<h;++i)m[i]=d.charCodeAt(i);return new Blob([m],{type:l})}(img.toDataURL(function(t){return"image/png"===t.type?"image/png":"image/jpeg"}(t))),c=t.name;c.length>100&&(c=c.substring(c.length-50)),r({name:c,url:URL.createObjectURL(o),blob:o})}}),{maxWidth:3072,maxHeight:3072,noRevoke:!0,orientation:!0,canvas:!0})||n(new Error("ERROR"))}))}}},640:function(t,e,r){"use strict";r(31),r(42);var n={props:{identifier:[String,Number],accept:String,capture:String,disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}},methods:{onChange:function(t){var e=this;this.$emit("change",t);for(var r=[],i=0;i<t.target.files.length;i++)r.push(t.target.files[i]);this.$emit("onFiles",r,this.identifier),setTimeout((function(){var t=e.$refs.fileInput;t&&(t.value="")}),500)},nop:function(){}}},o=(r(646),r(18)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"file-button"},[t._t("default"),t._v(" "),t.multiple?r("input",{ref:"fileInput",attrs:{type:"file",multiple:"",accept:t.accept,capture:t.capture,disabled:t.disabled},on:{change:t.onChange,click:function(e){return e.stopPropagation(),t.nop.apply(null,arguments)}}}):r("input",{ref:"fileInput",attrs:{type:"file",accept:t.accept,capture:t.capture,disabled:t.disabled},on:{change:t.onChange,click:function(e){return e.stopPropagation(),t.nop.apply(null,arguments)}}})],2)}),[],!1,null,"45657e2a",null);e.a=component.exports},643:function(t,e,r){"use strict";r(31),r(28),r(6);var n={props:{showRatingText:{type:Boolean,default:!1},disabled:Boolean,left:Boolean,size:Number,value:Number,totalReviews:Number},data:function(){return{stars:[1,2,3,4,5].map((function(t){return{value:t,icon:"star_outline.svg",filled:!1}}))}},computed:{color:function(){return this.$store.getters["theme/brandColor"]},starSize:function(){return this.size||40},starMargin:function(){return Math.round(this.starSize/10)},starStyle:function(){var t="".concat(this.starSize,"px");return{margin:"0 ".concat(this.starMargin,"px"),width:t,"max-width":t}}},watch:{value:{handler:function(t){var e=Math.round(t);this.stars.forEach((function(t){t.filled=t.value<=e}))},immediate:!0}},methods:{rate:function(t){this.disabled||(t==this.value&&(t=0),this.$emit("input",t),this.$emit("change",t))}}},o=(r(658),r(18)),c=r(26),l=r.n(c),d=r(567),h=r(568),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{style:{margin:"0 -"+t.starMargin+"px",height:t.starSize+"px"},attrs:{"justify-center":!t.left},on:{click:function(e){return t.$emit("click")}}},[t.showRatingText?r("strong",{staticClass:"mr-1",domProps:{textContent:t._s(t.value?t.value.toFixed(2):(0).toFixed(2))}}):t._e(),t._v(" "),t._l(t.stars,(function(e){return r("v-flex",{key:e.value,class:{clickable:!t.disabled},style:t.starStyle,on:{click:function(r){return t.rate(e.value)}}},[e.filled?r("svg",{attrs:{width:"48",height:"46",viewBox:"0 0 48 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M47.3185 17.5462C47.1711 17.1195 46.9031 16.7446 46.5469 16.4671C46.1907 16.1896 45.7617 16.0214 45.3118 15.9829L32.0352 14.0462L26.0852 1.98291C25.8941 1.58841 25.5958 1.25571 25.2244 1.02292C24.853 0.790125 24.4235 0.666656 23.9852 0.666656C23.5468 0.666656 23.1174 0.790125 22.7459 1.02292C22.3745 1.25571 22.0762 1.58841 21.8852 1.98291L15.9352 14.0229L2.65849 15.9829C2.22664 16.0443 1.82065 16.2255 1.48657 16.5059C1.1525 16.7864 0.90373 17.1549 0.76849 17.5696C0.644695 17.9748 0.633586 18.4061 0.736355 18.8172C0.839124 19.2283 1.05189 19.6036 1.35182 19.9029L10.9885 29.2362L8.65516 42.4896C8.57186 42.927 8.61547 43.3792 8.78086 43.7926C8.94624 44.2061 9.22648 44.5636 9.58849 44.8229C9.94133 45.0752 10.3575 45.2241 10.7903 45.2529C11.223 45.2818 11.6553 45.1894 12.0385 44.9862L23.9852 38.7562L35.8852 45.0096C36.2126 45.1943 36.5825 45.2908 36.9585 45.2896C37.4527 45.2913 37.9348 45.1361 38.3352 44.8463C38.6972 44.5869 38.9774 44.2294 39.1428 43.816C39.3082 43.4025 39.3518 42.9504 39.2685 42.5129L36.9352 29.2596L46.5718 19.9262C46.9087 19.6408 47.1577 19.2657 47.2899 18.8444C47.422 18.4231 47.432 17.973 47.3185 17.5462Z",fill:t.color}})]):r("svg",{attrs:{width:"48",height:"46",viewBox:"0 0 48 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M47.3333 17.5633C47.186 17.1365 46.9179 16.7617 46.5618 16.4842C46.2056 16.2067 45.7765 16.0385 45.3267 16L32.05 14.0633L26.1 2C25.9089 1.6055 25.6106 1.2728 25.2392 1.04001C24.8678 0.807215 24.4383 0.683746 24 0.683746C23.5617 0.683746 23.1322 0.807215 22.7608 1.04001C22.3894 1.2728 22.0911 1.6055 21.9 2L15.95 14.04L2.67332 16C2.24147 16.0614 1.83548 16.2426 1.50141 16.523C1.16733 16.8035 0.918561 17.172 0.783321 17.5867C0.659526 17.9919 0.648417 18.4232 0.751186 18.8343C0.853955 19.2454 1.06672 19.6207 1.36665 19.92L11.0033 29.2533L8.66999 42.5067C8.58669 42.9441 8.63031 43.3963 8.79569 43.8097C8.96107 44.2232 9.24131 44.5807 9.60332 44.84C9.95616 45.0923 10.3723 45.2412 10.8051 45.27C11.2379 45.2989 11.6701 45.2065 12.0533 45.0033L24 38.7733L35.9 45.0267C36.2275 45.2114 36.5973 45.3079 36.9733 45.3067C37.4676 45.3084 37.9496 45.1532 38.35 44.8633C38.712 44.604 38.9922 44.2465 39.1576 43.8331C39.323 43.4196 39.3666 42.9675 39.2833 42.53L36.95 29.2767L46.5867 19.9433C46.9235 19.6579 47.1725 19.2828 47.3047 18.8615C47.4369 18.4402 47.4468 17.99 47.3333 17.5633ZM32.9833 26.8967C32.7097 27.1614 32.5049 27.489 32.387 27.8509C32.2691 28.2129 32.2415 28.5983 32.3067 28.9733L33.9867 38.75L25.2133 34.0833C24.8757 33.9036 24.4991 33.8096 24.1167 33.8096C23.7342 33.8096 23.3576 33.9036 23.02 34.0833L14.2467 38.75L15.9267 28.9733C15.9918 28.5983 15.9643 28.2129 15.8463 27.8509C15.7284 27.489 15.5236 27.1614 15.25 26.8967L8.24999 19.8967L18.0733 18.4733C18.4513 18.4208 18.8106 18.2763 19.1198 18.0525C19.429 17.8288 19.6786 17.5326 19.8467 17.19L24 8.3L28.3867 17.2133C28.5548 17.556 28.8043 17.8521 29.1135 18.0759C29.4227 18.2996 29.782 18.4441 30.16 18.4967L39.9833 19.92L32.9833 26.8967Z",fill:t.color}})])])})),t._v(" "),t.totalReviews>0?r("v-flex",{attrs:{shrink:""}},[t._v("\n        ("+t._s(t.totalReviews)+")\n    ")]):t._e()],2)}),[],!1,null,"008d204d",null);e.a=component.exports;l()(component,{VFlex:d.a,VLayout:h.a})},646:function(t,e,r){"use strict";r(614)},658:function(t,e,r){"use strict";r(620)},659:function(t,e,r){"use strict";r(31),r(28);var n={name:"ProductImage",props:{product:Object,variation:Object,width:{type:Number,default:48},imgWidth:{type:Number,default:128},aspectRation:{type:Number,default:1}},computed:{fallbackImage:function(){var t=this.product;if(t){var image=(t.images||[])[0];if(image)return image.url}return null},variationImage:function(){return(this.variation.details||[]).length>0&&(this.variation.details||[]).map((function(i){return i.imageURL}))[0]||this.fallbackImage}}},o=r(18),c=r(26),l=r.n(c),d=r(308),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-img",{attrs:{"img-width":t.imgWidth,src:t.variationImage,"aspect-ratio":t.aspectRation,width:t.width}})],1)}),[],!1,null,null,null);e.a=component.exports;l()(component,{VImg:d.a})},687:function(t,e,r){"use strict";r(60),r(28),r(7),r(11),r(17);var n={quality:"REVIEW_QUALITY",service:"REVIEW_SERVICE",shipping:"REVIEW_SHIPPING",price:"REVIEW_PRICE"},o={methods:{reviewTags:function(t){var e=this;if(t.tags)try{return JSON.parse(t.tags||"[]").map((function(t){return n[t]})).filter((function(text){return!!text})).map((function(text){return"".concat(e.$t(text,e.$store.state.vendor.vendor.name)," ").concat(e.$t((r=t.score)>=4?"REVIEW_GREAT":r>=3?"REVIEW_GOOD":"REVIEW_BAD"));var r})).join(", ")}catch(t){console.error(t)}return""}}},c=r(18),component=Object(c.a)(o,undefined,undefined,!1,null,null,null);e.a=component.exports},758:function(t,e,r){},759:function(t,e,r){},760:function(t,e,r){},793:function(t,e,r){"use strict";r(60),r(28);var n=r(582),o={components:{ProductImage:r(659).a},props:{productVariationOrders:Array,date:String},computed:{formattedDate:function(){return Object(n.a)(this.$store,this.date)},numExtra:function(){return(this.productVariationOrders||[])-1},firstItem:function(){return(this.productVariationOrders||[])[0]},details:function(){return this.firstItem?(this.firstItem.productVariation.details||[]).map((function(t){return t.value})).join("•"):""},product:function(){var t=this.firstItem;return t?t.productVariation.product:null}}},c=r(18),l=r(26),d=r.n(l),h=r(567),m=r(568),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.product?r("v-layout",{staticClass:"pb-2"},[r("v-flex",[r("div",{staticClass:"font-weight-bold"},[t._v("\n            "+t._s(t.product.name)+"\n        ")]),t._v(" "),r("div",{staticClass:"light--text"},[t.details?r("div",[t._v("\n                "+t._s(t.details)+"\n            ")]):t._e(),t._v(" "),t.numExtra>0?r("div",[t._v("+"+t._s(t.numExtra))]):t._e(),t._v(" "),t.date?r("div",[t._v("("+t._s(t.$t("ORDERED"))+" "+t._s(t.formattedDate)+")")]):t._e()])]),t._v(" "),r("div",{staticClass:"ml-2"},[r("ProductImage",{attrs:{product:t.product,variation:t.firstItem.productVariation}})],1)],1):t._e()}),[],!1,null,null,null);e.a=component.exports;d()(component,{VFlex:h.a,VLayout:m.a})},851:function(t,e,r){t.exports=r.p+"901655609ef37ec59b8bd2dcc73b41d8.svg"},852:function(t,e,r){"use strict";r(758)},853:function(t,e,r){"use strict";r(759)},854:function(t,e,r){"use strict";r(760)},861:function(t,e,r){},866:function(t,e,r){"use strict";r(12),r(8),r(7),r(14),r(15);var n=r(0),o=r(2),c=(r(16),r(20),r(35),r(39),r(11),r(6),r(109),r(42),r(17),r(51)),l=r(638),d=(r(21),r(33),r(144),r(66),r(582)),h=r(583),m=r(643),f=r(687),v={components:{Rating:m.a},mixins:[f.a],props:{item:Object},computed:{html:function(){return Object(h.a)("".concat(this.item.product_name,"<br>").concat(this.$t("SELLERS_REPLY",this.$store.state.vendor.vendor.name),': "').concat(this.item.reply,'"'))}}},w=r(18),y=Object(w.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Rating",{attrs:{size:22,left:"",disabled:""},model:{value:t.item.score,callback:function(e){t.$set(t.item,"score",e)},expression:"item.score"}}),t._v(" "),r("div",{staticClass:"mt-4",domProps:{innerHTML:t._s(t.html)}})],1)}),[],!1,null,null,null).exports,x={components:{OrderItemProducts:r(793).a},props:{item:Object}},O=r(26),_=r.n(O),C=r(608),k=Object(w.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.item.orderNumber?r("div",{staticClass:"mb-3",on:{click:function(e){t.$router.push(t.$path("orders/"+t.item.id))}}},[r("OrderItemProducts",{attrs:{"product-variation-orders":t.item.productVariationOrders,date:t.item.createdAt}}),t._v(" "),r("v-divider")],1):t._e(),t._v(" "),r("btn-default",{staticClass:"icon-left",attrs:{block:"",small:"",route:"",to:t.$path("orders/"+t.item.id)}},[r("t-icon",{staticClass:"v-icon",attrs:{name:"file-alt"}}),t._v("\n        "+t._s(t.$t("VIEW_ORDER"))+"\n    ")],1)],1)}),[],!1,null,null,null),$=k.exports;_()(k,{VDivider:C.a});var E=r(73),j={props:{isCustomer:Boolean,item:Object},computed:{color:function(){return this.isCustomer?"white":"primary"},product:function(){return this.item}},methods:{clicked:function(){this.$store.commit("catalog/product",this.product),this.$router.push(Object(E.e)(this.$store,this.product))}}},P=r(558),R=r(567),I=r(568),T=Object(w.a)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"white--text"},[r("v-layout",{attrs:{"mb-2":"","align-center":""}},[r("div",{staticClass:"mr-2"},[r("t-img",{attrs:{img:t.product.image,"img-width":128,height:"48",width:"48"}})],1),t._v(" "),r("v-flex",{staticClass:"o-hidden"},[r("div",{staticClass:"lines-1"},[t._v("\n                "+t._s(t.product.name)+"\n            ")])])],1),t._v(" "),r("v-divider",{attrs:{dark:""}}),t._v(" "),r("v-btn",{staticClass:"mt-2",attrs:{small:"",block:"",color:t.color,text:""},on:{click:t.clicked}},[t._v("\n        "+t._s(t.$t("VIEW_PRODUCT"))+"\n    ")])],1)}),[],!1,null,null,null),L=T.exports;_()(T,{VBtn:P.a,VDivider:C.a,VFlex:R.a,VLayout:I.a});var S={components:{ReviewMessage:y,OrderMessage:$,ProductMessage:L},props:{message:Object},data:function(){return{path:null,link:null,item:null,itemType:null}},computed:{createdAt:function(){return Object(d.a)(this.$store,this.message.createdAt,{month:"short",time:!0})},vendor:function(){return this.$store.state.vendor.vendor},html:function(){var html=(this.message.message||"").replace(/<b>/g,'<div class="primary--text font-weight-bold">').replace(/<\/b>/g,"</div>").replace(/(https?:\/\/[^\s]+)/g,(function(t){return'<a class="message--link" href="'.concat(t,'" target="_blank" rel="noopener">').concat(t,"</a>")}));return Object(h.a)(html,{attributeWhitelist:{class:!0,href:!0,target:!0,rel:!0}})},isCustomer:function(){return!!this.message.customer},profileImage:function(){var t=r(851);return this.isCustomer?this.message.customer.profilePicture||t:this.vendor.profilePicture||t},meta:function(){return this.message.meta||{}}},watch:{item:function(t){this.$emit("onAppendView")}},mounted:function(){var t=this.meta.action||{};switch(t.key){case"review":this.loadReview(t.value);break;case"order":this.loadOrder(t.value);break;case"product":this.loadProduct(t.value)}var link=this.meta.link;if(link){var e="".concat(window.location.protocol,"//").concat(window.location.host);link.startsWith(e)?this.path=link.replace(e,"")||"/":link.startsWith("http")?this.link=link:this.path=this.$path(link)}},methods:{loadReview:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$axios.get("/shop/".concat(e.vendor.id,"/reviews/").concat(t),{});case 3:n=r.sent,e.itemType="ReviewMessage",e.item=n.data.data,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},loadProduct:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.itemType="ProductMessage",r.next=4,e.$store.dispatch("catalog/getProduct",t);case 4:e.item=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},loadOrder:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.message.$$hideDetails){r.next=4;break}return e.itemType="OrderMessage",e.item={id:parseInt(t)},r.abrupt("return");case 4:return r.prev=4,r.next=7,e.$axios.get("/shop/".concat(e.vendor.uniqueId,"/orders/").concat(t),{});case 7:n=r.sent,e.itemType="OrderMessage",(o=n.data.data).receipt||(o.receipt=null),e.item=o,r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),console.error(r.t0);case 17:case"end":return r.stop()}}),r,null,[[4,14]])})))()}}},B=(r(852),r(853),r(308)),D=r(116),M=Object(w.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{staticClass:"flex shrink mb-4 message",class:{"message--customer":t.isCustomer}},[t.isCustomer?t._e():r("v-flex",{attrs:{shrink:"","mr-2":""}},[r("v-img",{staticClass:"round",attrs:{eager:"",width:"24px","aspect-ratio":"1",src:t.profileImage}})],1),t._v(" "),r("v-flex",{staticClass:"message__content"},[t.message.message?r("v-sheet",{staticClass:"pa-2 b-lg break-word",class:{"primary white--text":t.isCustomer}},[r("div",{domProps:{innerHTML:t.html}}),t._v(" "),t.link?r("btn-default",{staticClass:"mt-2",attrs:{small:"",block:"",href:t.link,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("VIEW"))+"\n            ")]):t.path?r("btn-default",{staticClass:"mt-2",attrs:{small:"",block:"",route:"",to:t.path}},[t._v("\n                "+t._s(t.$t("VIEW"))+"\n            ")]):t._e()],1):t._e(),t._v(" "),t.message.imageUrl?r("v-img",{staticClass:"b-lg",class:{"mt-2":t.message.message},attrs:{src:t.$imageUrl(t.message.imageUrl),width:"100%"},on:{click:function(e){return t.$coverImage(t.message.imageUrl)}}}):t._e(),t._v(" "),t.itemType&&t.item?r("v-sheet",{staticClass:"mt-2 px-2 py-4 b-lg",class:{primary:"ProductMessage"==t.itemType}},[r(t.itemType,{tag:"component",attrs:{item:t.item,"is-customer":t.isCustomer}})],1):t._e(),t._v(" "),r("v-layout",{staticClass:"pl-3 mt-1 caption",attrs:{wrap:"","align-center":"","justify-space-between":""}},[r("div",{staticClass:"light--text"},[t._v("\n                "+t._s(t.createdAt)+"\n            ")]),t._v(" "),"auto_reply"==t.message.type?r("div",{staticClass:"primary--text"},[t._v("\n                "+t._s(t.$t("AUTO_REPLY"))+"\n            ")]):t._e()])],1)],1)}),[],!1,null,"13ee7d70",null),V=M.exports;_()(M,{VFlex:R.a,VImg:B.a,VLayout:I.a,VSheet:D.a});var A=r(640),N=r(581);function H(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function W(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var F=function(){return Promise.all([r.e(3),r.e(5),r.e(6),r.e(54)]).then(r.bind(null,870))},U={components:{Message:V,FileButton:A.a,LoginDialog:F},mixins:[N.a],props:{inModal:Boolean},data:function(){return{connected:!1,connecting:!1,roomId:null,input:null,sending:!1,freshMessages:[],whatsappMessage:""}},computed:W(W({},Object(c.b)({vendor:"vendor/vendor",messageLoginSkipped:"app/messageLoginSkipped"})),{},{inputLabel:function(){return this.$t("MESSAGE")},shopSettings:function(){return this.vendor.settings},whatsappBotMessage:function(){return{createdAt:Date.now(),message:"<b>".concat(this.$t("WHATSAPP_CHAT_MESSAGE_TITLE"),"</b> ").concat(this.$t("WHATSAPP_CHAT_MESSAGE")),type:"bot"}},items:function(){var t=this.pageItems.concat(this.freshMessages),e={};return t.forEach((function(t){if(!t.meta)try{t.meta=JSON.parse(t.actions)}catch(t){}t.meta||(t.meta={});var r=t.meta.action||{};if("order"==r.key){var n=r.value;e[n]&&(t.$$hideDetails=!0),e[n]=n}})),t.sort((function(a,b){return a.id-b.id})),t},hasAuthToken:function(){return!!this.$store.getters["user/authToken"]},hasFaqs:function(){var t=this.$store.getters["catalog/faqs"];return t&&t.length},isLoginCustomer:function(){var t=this.$store.getters["user/customer"];return!!t&&(this.hasAuthToken&&!!t.verifiedPhone)}}),watch:{sending:function(){this.scrollToBottom()},roomId:{handler:function(){this.connect()},immediate:!0},isLoginCustomer:function(){this.reload(!0)}},mounted:function(){var t=this;this.$gtm.step("messages_open"),this.inModal?setTimeout((function(){t.reload()}),200):this.reload()},beforeDestroy:function(){this.close(),this.$store.dispatch("messages/loadMessageCounts")},methods:{isWhatsappEnabled:function(){return!("free"==this.vendor.premiumPackage||!this.shopSettings)&&this.shopSettings.whatsappEnabled},whatsappRedirect:function(){window.open("https://api.whatsapp.com/send?phone=".concat(this.shopSettings.whatsappNumber,"&text=").concat(this.whatsappMessage),"_blank","noopener")},connect:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.roomId){e.next=3;break}return t.reload(),e.abrupt("return");case 3:if(!window.EventSource||!t.roomId){e.next=20;break}return t.connecting=!0,e.prev=5,t.close(),e.next=9,t.$axios.get("".concat(t.$config.messagingURL,"/room/").concat(t.roomId,"/token"));case 9:r=e.sent,t.source=new EventSource("".concat(t.$config.messagingURL,"/stream/").concat(t.roomId,"?token=").concat(r.data.token)),t.source.onmessage=t.onMessage,t.source.onerror=t.onError,t.connected=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.error(e.t0);case 19:t.connecting=!1;case 20:case"end":return e.stop()}}),e,null,[[5,16]])})))()},onError:function(){this.close()},onMessage:function(t){try{var e=JSON.parse(t.data);this.freshMessages.every((function(t){return t.id!=e.id}))&&this.pageItems.every((function(t){return t.id!=e.id}))&&(this.freshMessages.push(e),this.scrollToBottom())}catch(t){console.error(t)}},close:function(){this.connected=!1,this.connecting=!1,this.source&&this.source.close()},reload:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.isLoginCustomer||e.messageLoginSkipped||e.isWhatsappEnabled()){r.next=7;break}return r.next=3,F();case 3:return r.next=5,e.$nextTick();case 5:return setTimeout((function(){e.$refs.loginDialog.open()}),50),r.abrupt("return");case 7:if(e.roomId&&!t){r.next=18;break}return r.prev=8,r.next=11,e.$axios.get("shop/".concat(e.vendor.id,"/chatroom"));case 11:n=r.sent,e.roomId=n.data.data.id,r.next=18;break;case 15:r.prev=15,r.t0=r.catch(8),console.error(r.t0);case 18:return e.freshMessages=[],r.next=21,e.pageReload();case 21:e.scrollToBottom(),e.markAsSeen();case 23:case"end":return r.stop()}}),r,null,[[8,15]])})))()},onFiles:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t[0],r.next=3,l.a.resizeImage(n);case 3:o=r.sent,e.postMessage({imageData:o});case 5:case"end":return r.stop()}}),r)})))()},send:function(){var t=this.input;t&&(this.postMessage({message:t}),this.$axios.post("/shop/".concat(this.vendor.id,"/sendChatPush"),{message:t,chatroomId:this.roomId}))},postMessage:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.message,o=t.imageData,!e.sending){r.next=3;break}return r.abrupt("return");case 3:return c=new FormData,o&&c.append("file",o.blob,o.name),n&&c.append("data",JSON.stringify({message:n})),e.sending=!0,r.prev=7,r.next=10,e.$axios.post("".concat(e.$config.messagingURL,"/room/").concat(e.roomId),c,{headers:{"Content-Type":"multipart/form-data"},params:{locale:e.$store.state.translate.translation.locale}});case 10:o&&e.input&&e.send(),n&&(e.input=null),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(7),console.error(r.t0);case 17:e.sending=!1;case 18:case"end":return r.stop()}}),r,null,[[7,14]])})))()},scrollToBottom:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.autoScrollDisabled){e.next=2;break}return e.abrupt("return");case 2:if(!t.inModal){e.next=9;break}return e.next=5,t.$nextTick();case 5:(r=document.querySelector(".chat-modal .v-card__text"))&&r.scrollTo(0,r.scrollHeight),e.next=11;break;case 9:t.$nextTick((function(){window.scrollTo(0,window.document.body.scrollHeight)})),setTimeout((function(){window.scrollTo(0,window.document.body.scrollHeight)}),250);case 11:case"end":return e.stop()}}),e)})))()},pagePromise:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object.assign(t,{order:"desc",sortby:"id",join:"none"}),r.next=3,e.$axios.get("/shop/".concat(e.vendor.id,"/messages"),{params:t});case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()},markAsSeen:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.items[0]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.$axios.post("/shop/".concat(t.vendor.id,"/chatrooms/").concat(r.chatroom.id,"/markAsSeen"));case 6:t.$store.commit("messages/numUnreadMessages",0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()},loadNext:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.autoScrollDisabled=!0,r=document.querySelector(".message"),e.next=4,t.pageLoad();case 4:setTimeout((function(){t.autoScrollDisabled=!1,r&&t.$vuetify.goTo(r,{duration:0,offset:16})}),250);case 5:case"end":return e.stop()}}),e)})))()},skipLogin:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasAuthToken){e.next=3;break}return e.next=3,t.$store.dispatch("user/createCustomer");case 3:return e.next=5,t.$store.commit("app/setMessageLoginSkipped",!0);case 5:t.reload();case 6:case"end":return e.stop()}}),e)})))()},toFaq:function(){this.inModal&&this.$nuxt.$emit("toggleChatModal"),this.$router.push({path:this.$path("info")})}}},Q=(r(854),r(697)),z=Object(w.a)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"messages",class:{"messages--modal":t.inModal}},[t.roomId&&!t.pageLoading&&0==t.items.length&&!t.isWhatsappEnabled()||t.roomId&&!t.pageLoading&&0==t.items.length&&t.isWhatsappEnabled()&&!t.inModal?r("v-layout",{staticClass:"text-center",attrs:{"px-2":"","py-6":"",column:"","align-center":"","justify-center":""}},[r("div",{staticClass:"display-2 mb-1"},[t._v("\n            "+t._s(t.$t("NO_MESSAGES_1"))+"\n        ")]),t._v("\n        "+t._s(t.$t("NO_MESSAGES_2",t.vendor.name))+"\n    ")]):t._e(),t._v(" "),r("v-layout",{staticStyle:{"padding-bottom":"64px"},attrs:{column:"","justify-end":""}},[!t.isWhatsappEnabled()||t.isWhatsappEnabled()&&!t.inModal?[!t.roomId||t.pageLoading?r("ProgressView"):t.pageHasMore?r("v-flex",{attrs:{"mb-6":"",shrink:""}},[r("btn-default",{attrs:{block:""},on:{click:function(e){return e.stopPropagation(),t.loadNext.apply(null,arguments)}}},[t._v("\n                    "+t._s(t.$t("VIEW_MORE"))+"\n                ")])],1):t._e()]:t._e(),t._v(" "),t.isWhatsappEnabled()&&t.inModal?r("Message",{attrs:{message:t.whatsappBotMessage},on:{onAppendView:t.scrollToBottom}}):t._l(t.items,(function(e){return r("Message",{key:e.id,attrs:{message:e},on:{onAppendView:t.scrollToBottom}})})),t._v(" "),t.sending?r("ProgressView",{staticClass:"mb-2",attrs:{size:24,width:3}}):t._e()],2),t._v(" "),r("div",{class:{"bottom-container":!t.inModal,messages__input:!0,"in-modal-bottom":t.inModal,"pb-3":t.inModal,"pa-2":!t.inModal}},[t.isWhatsappEnabled()?r("v-layout",{attrs:{"align-center":""}},[r("v-flex",{staticClass:"bg"},[r("div",{staticClass:"faded p-relative"},[r("v-text-field",{attrs:{label:t.inputLabel,"single-line":"",filled:"","hide-details":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.whatsappRedirect())}},model:{value:t.whatsappMessage,callback:function(e){t.whatsappMessage=e},expression:"whatsappMessage"}})],1)]),t._v(" "),r("v-btn",{staticClass:"ml-2",staticStyle:{"min-width":"auto"},attrs:{color:"whatsapp-color"},on:{click:function(e){return e.stopPropagation(),t.whatsappRedirect()}}},[r("t-icon",{staticClass:"v-icon",attrs:{name:"message"}})],1)],1):t.connected?r("v-layout",{attrs:{"align-center":""}},[r("v-flex",{staticClass:"bg"},[r("div",{staticClass:"faded p-relative"},[r("v-text-field",{attrs:{label:t.inputLabel,"single-line":"",filled:"","hide-details":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.send.apply(null,arguments))}},scopedSlots:t._u([{key:"append",fn:function(){return[r("t-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),r("FileButton",{staticClass:"file-button",on:{onFiles:t.onFiles}},[r("v-btn",{attrs:{icon:""}})],1),t._v(" "),t.hasFaqs&&!t.input?r("v-btn",{staticClass:"faq-button",attrs:{text:"",fab:"",small:""},on:{click:function(e){return e.stopPropagation(),t.toFaq.apply(null,arguments)}}},[t._v("\n                        "+t._s(t.$t("FAQ"))+"\n                    ")]):t._e()],1)]),t._v(" "),t.input?r("v-btn",{staticClass:"ml-2",attrs:{color:"white"},on:{click:function(e){return e.stopPropagation(),t.send.apply(null,arguments)}}},[t._v("\n                "+t._s(t.$t("SEND"))+"\n            ")]):t._e()],1):r("v-layout",[r("v-btn",{attrs:{block:"",color:"white",disabled:t.connecting},on:{click:function(e){return e.stopPropagation(),t.connect.apply(null,arguments)}}},[t.connecting?[t._v(t._s(t.$t("CONNECTING"))+"...")]:[t._v("\n                    "+t._s(t.$t("CONNECT"))+"\n                ")]],2)],1)],1),t._v(" "),r("LoginDialog",{ref:"loginDialog",attrs:{optional:!0},on:{skip:t.skipLogin}})],1)}),[],!1,null,"ef874272",null);e.a=z.exports;_()(z,{VBtn:P.a,VFlex:R.a,VLayout:I.a,VTextField:Q.a})},882:function(t,e,r){"use strict";var n=r(0),o=(r(16),r(21),r(33),r(73)),c=r(582),l={props:{showReminder:Boolean,ready:Boolean,releaseDate:String,releaseCountDown:Boolean,disabled:Boolean},data:function(){return{blockOrderAfter:new Date("2022-10-21T17:00:01Z")}},computed:{buttonDisabled:function(){return!this.ready||this.isClosed||!this.isReleased||this.disabled},text:function(){return this.$t(this.showReminder?"RESTOCK_REMIND":"ADD_TO_CART")},isClosed:function(){return this.$store.getters["vendor/isClosed"]},closedText:function(){return this.$t("BUY_CLOSED").replace("%s",Object(c.a)(this.$store,this.$store.getters["vendor/vendor"].closedUntil,{month:"short"}))},isReleased:function(){return Object(o.g)({releaseDate:this.releaseDate})},showBuyButton:function(){return!this.$store.getters["vendor/shopSuspicious"]&&!(!this.isReleased&&this.releaseCountDown)},formattedDate:function(){return Object(c.a)(this.$store,this.releaseDate,{time:!0,month:"short"})}},methods:{onClick:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Date,!(t.blockOrderAfter.getTime()<=r.getTime())){e.next=5;break}return e.next=4,t.$dialog({title:"SORRY_ORDER_CLOSE_TITLE",text:"SORRY_ORDER_CLOSE_TEXT"});case 4:return e.abrupt("return");case 5:t.$emit("click");case 6:case"end":return e.stop()}}),e)})))()}}},d=(r(905),r(18)),h=r(26),m=r.n(h),f=r(558),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showBuyButton?r("v-btn",{class:t.isClosed||!t.isReleased?"px-1":"icon-left",attrs:{color:"primary",block:"",disabled:t.buttonDisabled},on:{click:t.onClick}},[t.isClosed?r("div",{staticClass:"text-wrap"},[t._v("\n        "+t._s(t.closedText)+"\n    ")]):t.isReleased||t.releaseCountDown?[r("t-icon",{staticClass:"v-icon",attrs:{name:t.showReminder?"envelope-send":"shopping-cart"}}),t._v("\n        "+t._s(t.text)+"\n    ")]:r("div",{staticClass:"text-wrap primary--text"},[t._v("\n        "+t._s(t.$t("COMING_SOON"))+": "+t._s(t.formattedDate)+"\n    ")])],2):t._e()}),[],!1,null,"46e60ddc",null);e.a=component.exports;m()(component,{VBtn:f.a})},905:function(t,e,r){"use strict";r(861)},952:function(t,e,r){},953:function(t,e,r){},954:function(t,e,r){},955:function(t,e,r){}}]);